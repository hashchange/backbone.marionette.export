<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Memory Leak Test - Demos and Playground</title>

    <!-- ATTN Foundation loaded without JS - stay clear of JS-driven widgets, or add the JS setup -->
    <!--
        ATTN jQuery 1.x is used here, making the demo compatible with oldIE. As a side effect,
        Foundation 5 JS can't be used reliably (requires jQuery 2.x). Stay clear, or switch to
        jQuery 2.x, available in node_modules.
    -->
    <link rel="stylesheet" href="../bower_demo_components/foundation/css/normalize.css">
    <link rel="stylesheet" href="../bower_demo_components/foundation/css/foundation.css">

    <link rel="stylesheet" href="memtest.css">

    <!-- Fix HTML5 tags in oldIE and other lacking legacy browsers -->
    <script src="../bower_demo_components/modernizr/modernizr.js"></script>
</head>
<body>
    <!-- check that 'bower install' has been run in the demo dir if bower.json isn't empty -->
    <script src="../bower-check.js"></script>

    <!-- body content here... -->
    <section>
        <h1 class="row">Memory leak test</h1>
        <p class="row">Enable memory profiling in the browser, then run one of these tests:</p>
        <form id="memtest">

            <div class="row">

                <fieldset id="testTypes" class="large-3 medium-4 columns">
                    <legend>Component</legend>
                    <div><input type="radio" id="backboneTest" name="testType" value="backbone" checked><label for="backboneTest">exportable</label></div>
                    <div><input type="radio" id="backboneOnExportTest" name="testType" value="backbone.onExport"><label for="backboneTest">exportable, onExport</label></div>
                </fieldset>

                <fieldset id="repetition" class="large-8 medium-7 columns">
                    <legend>Repetition</legend>
                    <div class="row">
                        <div class="large-3 columns">
                            <label for="modelSetSize">models per set</label>
                            <input id="modelSetSize" type="number" min="1" max="10000" step="1" value="10000">
                        </div>
                        <div class="large-3 columns">
                            <label for="modelLoop">sets generated *</label>
                            <input id="modelLoop" type="number" min="1" max="10000" step="1" value="50">
                        </div>
                        <div class="large-5 columns">
                            <label for="collectionLoop">collections generated *</label>
                            <input id="collectionLoop" type="number" min="1" max="500" step="1" value="500">
                        </div>
                    </div>
                    <div class="row">
                        <div class="large-12 columns"><small>* reference released immediately, only one instance kept around</small></div>
                    </div>
                </fieldset>

            </div>

            <div class="row">

                <fieldset id="collectionBehavior" class="large-8 medium-7 medium-push-5 large-reset-order columns">
                    <legend>Behaviour / Options ...</legend>
                    <p>Nothing available here.</p>
                </fieldset>

                <div class="large-3 medium-5 medium-pull-7 large-reset-order columns">
                    <button id="runMemtest" type="submit">Run script for profiling</button>
                </div>

            </div>

        </form>
        <div class="row">
            <h2><small>Script output</small></h2>
            <pre id="log"></pre>
        </div>
    </section>
    
    <!-- libraries --><!-- edit and replace with your project libraries as needed -->
    <script src="../bower_demo_components/jquery/dist/jquery.js"></script>
    <script src="../../bower_components/underscore/underscore.js"></script>
    <script src="../../bower_components/backbone/backbone.js"></script>

    <!-- include project source files here... -->
    <script src="../../src/backbone.marionette.export.js"></script>

    <!-- demo js here... -->
    <script src="memtest.js"></script>

</body>
</html>
